{"openapi":"3.0.1","info":{"title":"Nano CRM API","description":"RESTful API for Nano CRM system - Customer Relationship Management. API versioning via URI path (/api/v1/...)","contact":{"name":"Artezio","email":"support@artezio.com"},"license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0.html"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Development server"},{"url":"https://api.nano-crm.artezio.com","description":"Production server"}],"tags":[{"name":"Authentication","description":"Authentication management API"},{"name":"Health","description":"Health check API"},{"name":"Customer","description":"Customer management API"}],"paths":{"/api/v1/customers/{id}":{"get":{"tags":["Customer"],"summary":"Get customer by ID","description":"Returns a single customer in base normalized representation. Media Type: application/json","operationId":"getCustomerById","parameters":[{"name":"Accept","in":"header","description":"Media type for response representation: application/json (default), application/vnd.api.customer.detail+json","schema":{"type":"string","default":"application/json","enum":["application/json","application/vnd.api.customer.detail+json"]}},{"name":"id","in":"path","description":"Customer ID","required":true,"schema":{"type":"string","format":"uuid"},"example":"123e4567-e89b-12d3-a456-426614174000"}],"responses":{"404":{"description":"Customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"NOT_FOUND","message":"Customer not found"}}}},"200":{"description":"Customer found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}},"application/vnd.api.customer.detail+json":{"schema":{"$ref":"#/components/schemas/CustomerDetail"}}}},"406":{"description":"Not Acceptable - unsupported Accept header media type","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"NOT_ACCEPTABLE","message":"Unsupported media type in Accept header"}}}}}},"put":{"tags":["Customer"],"summary":"Update customer","description":"Full update of an existing customer by their ID. All fields are required.","operationId":"updateCustomer","parameters":[{"name":"id","in":"path","description":"Customer ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"description":"Full customer data to update (all fields required)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerUpdate"}}},"required":true},"responses":{"404":{"description":"Not Found - customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"NOT_FOUND","message":"Customer not found"}}}},"400":{"description":"Bad Request - invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"VALIDATION_ERROR","message":"Request validation failed"}}}},"200":{"description":"Customer updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Customer"}}}},"409":{"description":"Conflict - customer with this email already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"CONFLICT","message":"Customer with this email already exists"}}}}}},"delete":{"tags":["Customer"],"summary":"Delete customer","description":"Deletes a customer by their ID","operationId":"deleteCustomer","parameters":[{"name":"id","in":"path","description":"Customer ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Not Found - customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"NOT_FOUND","message":"Customer not found"}}}},"204":{"description":"Customer deleted successfully"}}},"patch":{"tags":["Customer"],"summary":"Partially update customer","description":"Partial update of an existing customer. Only provided fields will be updated.","operationId":"patchCustomer","parameters":[{"name":"id","in":"path","description":"Customer ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"description":"Partial customer data (only fields to update)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerPatch"}}},"required":true},"responses":{"404":{"description":"Not Found - customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"NOT_FOUND","message":"Customer not found"}}}},"400":{"description":"Bad Request - invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"VALIDATION_ERROR","message":"Request validation failed"}}}},"200":{"description":"Customer updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Customer"}}}},"409":{"description":"Conflict - customer with this email already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"CONFLICT","message":"Customer with this email already exists"}}}}}}},"/api/v1/customers":{"get":{"tags":["Customer"],"summary":"Get customers list with pagination, filtering, and sorting","description":"Returns customers in base normalized representation with pagination, filtering, and sorting. Media Type: application/json. Query params: page (default: 1), limit (default: 20, max: 100), email, countryId, search (min 2 chars), sort (name_asc, name_desc, email_asc, email_desc, created_asc, created_desc, default: created_desc)","operationId":"getCustomers","parameters":[{"name":"Accept","in":"header","description":"Media type for response representation: application/json (default), application/vnd.api.customer.list+json, application/vnd.api.customer.lookup+json","schema":{"type":"string","default":"application/json","enum":["application/json","application/vnd.api.customer.list+json","application/vnd.api.customer.lookup+json"]}},{"name":"page","in":"query","description":"Page number (1-indexed)","schema":{"minimum":1,"type":"integer","default":1},"example":1},{"name":"limit","in":"query","description":"Number of items per page (1-100)","schema":{"maximum":100,"minimum":1,"type":"integer","default":20},"example":20},{"name":"email","in":"query","description":"Filter by exact email match. Returns 200 with empty array if not found (filtering, not lookup).","schema":{"type":"string","format":"email"},"example":"john.doe@example.com"},{"name":"countryId","in":"query","description":"Filter by country ID","schema":{"type":"string","format":"uuid"},"example":"00000000-0000-0000-0000-000000000001"},{"name":"search","in":"query","description":"Search in name, email, phone fields (partial match, case-insensitive)","schema":{"minLength":2,"type":"string"},"example":"john"},{"name":"sort","in":"query","description":"Sort field and direction","schema":{"type":"string","default":"created_desc","enum":["name_asc","name_desc","email_asc","email_desc","created_asc","created_desc"]},"example":"created_desc"}],"responses":{"200":{"description":"Customers retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Customer"}}},"application/vnd.api.customer.list+json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CustomerListItem"}}},"application/vnd.api.customer.lookup+json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CustomerLookup"}}}}},"400":{"description":"Bad Request - invalid search parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"INVALID_SORT_PARAMETER","message":"Invalid sort parameter. Allowed values: name_asc, name_desc, email_asc, email_desc, created_asc, created_desc"}}}},"406":{"description":"Not Acceptable - unsupported Accept header media type","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"NOT_ACCEPTABLE","message":"Unsupported media type in Accept header"}}}}}},"post":{"tags":["Customer"],"summary":"Create a new customer","description":"Creates a new customer with the provided information","operationId":"createCustomer","requestBody":{"description":"Customer data to create","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerCreate"}}},"required":true},"responses":{"400":{"description":"Bad Request - invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"VALIDATION_ERROR","message":"Request validation failed"}}}},"201":{"description":"Customer created successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Customer"}}}},"409":{"description":"Conflict - customer with this email already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"CONFLICT","message":"Customer with this email already exists"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Authentication"],"summary":"Authenticate user","description":"Authenticates user and returns JWT token","operationId":"authenticateUser","requestBody":{"description":"Authentication credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRequest"}}},"required":true},"responses":{"200":{"description":"Successfully authenticated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"401":{"description":"Unauthorized - invalid credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"UNAUTHORIZED","message":"Invalid credentials"}}}}}}},"/api/v1/customers/by-email/{email}":{"get":{"tags":["Customer"],"summary":"Get customer by email (alternative endpoint)","description":"Alternative way to lookup customer by email using path parameter. Use this approach when email is treated as an alternative unique identifier. For filtering/searching, prefer query parameters (GET /customers?email=...)","operationId":"getCustomerByEmail","parameters":[{"name":"email","in":"path","description":"Customer email address","required":true,"schema":{"type":"string"},"example":"john.doe@example.com"}],"responses":{"404":{"description":"Not Found - customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"},"example":{"code":"NOT_FOUND","message":"Customer not found"}}}},"200":{"description":"Customer found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Customer"}}}}}}},"/":{"get":{"tags":["Health"],"summary":"Health check","description":"Returns application health status","operationId":"healthCheck","responses":{"200":{"description":"Application is running","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}}},"components":{"schemas":{"CustomerUpdate":{"required":["countryId","email","name"],"type":"object","properties":{"name":{"maxLength":100,"minLength":2,"type":"string","description":"Customer name","example":"John Doe"},"email":{"maxLength":255,"minLength":0,"type":"string","description":"Customer email address","example":"john.doe@example.com"},"phone":{"maxLength":20,"minLength":0,"type":"string","description":"Customer phone number","example":"+1-555-0101"},"countryId":{"type":"string","description":"Country identifier","format":"uuid","example":"00000000-0000-0000-0000-000000000001"}},"description":"Customer representation for update"},"Error":{"required":["code","message"],"type":"object","properties":{"code":{"type":"string","description":"Machine-readable error code","example":"NOT_ACCEPTABLE"},"message":{"type":"string","description":"Human-readable error message","example":"Unsupported media type in Accept header"}},"description":"Standard error response format"},"Customer":{"required":["countryId","email","name"],"type":"object","properties":{"id":{"type":"string","description":"Customer unique identifier","format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000"},"name":{"maxLength":100,"minLength":2,"type":"string","description":"Customer name","example":"John Doe"},"email":{"maxLength":255,"minLength":0,"type":"string","description":"Customer email address","example":"john.doe@example.com"},"phone":{"maxLength":20,"minLength":0,"type":"string","description":"Customer phone number","example":"+1-555-0101"},"countryId":{"type":"string","description":"Country identifier","format":"uuid","example":"00000000-0000-0000-0000-000000000001"},"createdAt":{"type":"string","description":"Creation timestamp","format":"date-time","readOnly":true},"updatedAt":{"type":"string","description":"Last update timestamp","format":"date-time","readOnly":true}},"description":"Customer resource representation"},"CustomerCreate":{"required":["email","name"],"type":"object","properties":{"name":{"maxLength":100,"minLength":2,"type":"string","description":"Customer name","example":"John Doe"},"email":{"maxLength":255,"minLength":0,"type":"string","description":"Customer email address","example":"john.doe@example.com"},"phone":{"maxLength":20,"minLength":0,"type":"string","description":"Customer phone number","example":"+1-555-0101"},"countryId":{"type":"string","description":"Country identifier","format":"uuid","example":"00000000-0000-0000-0000-000000000001"}},"description":"Customer representation for creation"},"AuthRequest":{"required":["password","username"],"type":"object","properties":{"username":{"type":"string","description":"Username","example":"admin"},"password":{"type":"string","description":"Password","example":"password"}},"description":"Authentication request with username and password"},"AuthResponse":{"type":"object","properties":{"accessToken":{"type":"string","description":"JWT access token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"tokenType":{"type":"string","description":"Token type","example":"Bearer"},"expiresIn":{"type":"integer","description":"Token expiration time in milliseconds","format":"int64","example":86400000}},"description":"Authentication response with JWT token"},"CustomerPatch":{"type":"object","properties":{"name":{"maxLength":100,"minLength":2,"type":"string","description":"Customer name (optional)","example":"John Doe"},"email":{"maxLength":255,"minLength":0,"type":"string","description":"Customer email address (optional)","example":"john.doe@example.com"},"phone":{"maxLength":20,"minLength":0,"type":"string","description":"Customer phone number (optional)","example":"+1-555-0101"},"countryId":{"type":"string","description":"Country identifier (optional)","format":"uuid","example":"00000000-0000-0000-0000-000000000001"}},"description":"Customer representation for partial update"},"CustomerListItem":{"required":["countryId","countryName","email","id","name","phone"],"type":"object","properties":{"id":{"type":"string","description":"Customer unique identifier","format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000"},"name":{"type":"string","description":"Customer name","example":"John Doe"},"email":{"type":"string","description":"Customer email address","example":"john.doe@example.com"},"phone":{"type":"string","description":"Customer phone number","example":"+1-555-0101"},"countryId":{"type":"string","description":"Country identifier","format":"uuid","example":"00000000-0000-0000-0000-000000000001"},"countryName":{"type":"string","description":"Country name (denormalized)","example":"United States"}},"description":"List representation with denormalized data for tables. Used with: application/vnd.api.customer.list+json"},"CustomerLookup":{"required":["id","name"],"type":"object","properties":{"id":{"type":"string","description":"Customer unique identifier","format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000"},"name":{"type":"string","description":"Display name","example":"John Doe"}},"description":"Lookup representation for dropdown/select controls. Used with: application/vnd.api.customer.lookup+json"},"CustomerDetail":{"required":["countryId","countryName","email","name"],"type":"object","properties":{"id":{"type":"string","description":"Customer unique identifier","format":"uuid","example":"123e4567-e89b-12d3-a456-426614174000"},"name":{"type":"string","description":"Customer name","example":"John Doe"},"email":{"type":"string","description":"Customer email address","example":"john.doe@example.com"},"phone":{"type":"string","description":"Customer phone number","example":"+1-555-0101"},"countryId":{"type":"string","description":"Country identifier","format":"uuid","example":"00000000-0000-0000-0000-000000000001"},"countryName":{"type":"string","description":"Country name (denormalized)","example":"Russia"},"createdAt":{"type":"string","description":"Creation timestamp","format":"date-time","readOnly":true},"updatedAt":{"type":"string","description":"Last update timestamp","format":"date-time","readOnly":true}},"description":"Extended detailed representation with all fields including countryName. Used with: application/vnd.api.customer.detail+json"}}}}